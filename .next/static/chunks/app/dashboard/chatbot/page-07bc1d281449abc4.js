(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{283:(e,s,a)=>{"use strict";a.d(s,{A:()=>c,O:()=>i});var l=a(5155),r=a(2115),t=a(5695),o=a(2409);let n=(0,r.createContext)(void 0);function i(e){let{children:s}=e,[a,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[g,x]=(0,r.useState)(!0),m=(0,t.useRouter)();(0,r.useEffect)(()=>{let e=!1;!async function(){x(!0);try{var s,a;console.log("Loading session...");let{data:{session:l},error:r}=await o.N.auth.getSession();if(r&&console.error("Session error:",r),e)return;console.log("Session loaded:",(null==l||null==(s=l.user)?void 0:s.id)||"No user"),i(null!=(a=null==l?void 0:l.user)?a:null),(null==l?void 0:l.user)&&await f(l.user.id)}catch(e){console.error("Error loading session:",e)}finally{e||x(!1)}}();let{data:{subscription:s}}=o.N.auth.onAuthStateChange(async(s,a)=>{var l,r;e||(console.log("Auth state changed:",s,(null==a||null==(l=a.user)?void 0:l.id)||"No user"),i(null!=(r=null==a?void 0:a.user)?r:null),(null==a?void 0:a.user)?await f(a.user.id):(console.log("No session, clearing profile and organization"),d(null),h(null),"/login"!==window.location.pathname&&m.push("/login")),x(!1))});return()=>{e=!0,s.unsubscribe()}},[m]);let f=async e=>{try{console.log("Fetching profile for user:",e);let{data:s,error:a}=await o.N.from("profiles").select("*").eq("id",e).single();if(a){console.error("Profile fetch error:",a),console.error("Error details:",{message:a.message,details:a.details,hint:a.hint,code:a.code}),d(null),h(null);return}if(console.log("Profile fetched successfully:",s),d(s),null==s?void 0:s.organization_id){console.log("Fetching organization:",s.organization_id);let{data:e,error:a}=await o.N.from("organizations").select("*").eq("id",s.organization_id).single();a?(console.error("Organization fetch error:",a),console.error("Organization error details:",{message:a.message,details:a.details,hint:a.hint,code:a.code}),h(null)):(console.log("Organization fetched successfully:",e),h(e))}else console.log("No organization_id in profile"),h(null)}catch(e){console.error("Unexpected error in fetchProfile:",e),console.error("Error stack:",e.stack),d(null),h(null)}},y=async()=>{try{console.log("Signing out..."),await o.N.auth.signOut(),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}catch(e){console.error("Error during sign out:",e),window.location.href="/login"}};return(0,l.jsx)(n.Provider,{value:{user:a,profile:c,organization:u,loading:g,signOut:y},children:g?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-t-2",style:{borderColor:"#595F39"}}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mt-4",children:"Loading ScaleWize AI"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Connecting to your workspace..."})]})}):s})}function c(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},381:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1497:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(9946).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},2409:(e,s,a)=>{"use strict";a.d(s,{N:()=>l});let l=(0,a(3254).createBrowserClient)("https://mtybaactacapokejmtxy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10eWJhYWN0YWNhcG9rZWptdHh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3MTE5MTMsImV4cCI6MjA2NzI4NzkxM30.u9EudibnPY-rGAFX4E2TfCgyKEBa9_7a2nojUcICJGQ")},3159:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var l=a(5155),r=a(283),t=a(5657),o=a(381),n=a(1497);function i(){let{profile:e,organization:s}=(0,r.A)();return(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Chatbot"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Your organization's intelligent AI assistant"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 h-96 flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(t.A,{className:"h-6 w-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900",children:[(null==s?void 0:s.name)||"Organization"," AI Assistant"]}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Powered by ScaleWize AI"})]})]}),(0,l.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,l.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,l.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(t.A,{className:"h-5 w-5 text-blue-600"})}),(0,l.jsx)("div",{className:"bg-blue-50 rounded-lg p-3 max-w-md",children:(0,l.jsx)("p",{className:"text-gray-900",children:"Hello! I'm your AI assistant. I can help you with questions about your organization, provide insights, and assist with various tasks. How can I help you today?"})})]})})}),(0,l.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("input",{type:"text",placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,l.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Send"})]})})]}),(0,l.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6 text-center",children:[(0,l.jsx)(n.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Advanced Features Coming Soon"}),(0,l.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:"We're working on advanced chatbot features including knowledge base integration, custom training, and analytics. Stay tuned for updates!"})]})]})}},5657:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(9946).A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},8662:(e,s,a)=>{Promise.resolve().then(a.bind(a,3159))}},e=>{var s=s=>e(e.s=s);e.O(0,[925,441,684,358],()=>s(8662)),_N_E=e.O()}]);